<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Directory Organizer</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <div class="container">
            <h1 class="heading">Directory Organizer</h1>
            <div class="folder-info-div">
                <h2>Selected Folder :</h2>
                <h3 class="folder-selected"></h3>
            </div>
            <div class="buttons">
                <button class="choose-btn">Choose Folder</button>
                <button class="organize-btn">Organize</button>
            </div>
        </div>
    </body>
    <script>
        const selectedFolderTag = document.querySelector(".folder-selected");
        const chooseBtn = document.querySelector(".choose-btn");
        const organizeBtn = document.querySelector(".organize-btn");
        const statusTag = document.querySelector(".status");

        let selectedFolderPath = null;
        organizeBtn.disabled = true;

        chooseBtn.addEventListener("click", async () => {
            const folderPath = await window.api.selectDirectory();
            if (folderPath) {
                selectedFolderPath = folderPath;
                selectedFolderTag.innerText = folderPath;
                organizeBtn.disabled = false;
            }
        });

        organizeBtn.addEventListener("click", async () => {
            if (!selectedFolderPath) {
                statusTag.innerText = "Please select a folder first";
                return;
            }

            const result = await window.api.organizeDirectory(
                selectedFolderPath
            );

            const message = `
            Status: ${result.status}
            Files found: ${result.totalFiles}
            Organized: ${result.organized}
            Skipped files: ${result.skippedFiles}
            Folders found: ${result.foldersFound}
            Errors: ${result.errors}
            Conflicts: ${result.conflicts}
            `;

            alert(message);
        });
    </script>
</html>

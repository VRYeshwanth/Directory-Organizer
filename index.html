<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Directory Organizer</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <div class="container">
            <h1 class="heading">Directory Organizer</h1>
            <p class="subtitle">Organize your files automatically by type</p>
            <div class="folder-info-div">
                <h2>Selected Folder :</h2>
                <h3 class="folder-selected">No folder selected</h3>
            </div>
            <div class="buttons">
                <button class="choose-btn">Choose Folder</button>
                <button class="organize-btn">Organize</button>
            </div>
        </div>

        <!-- Result Modal -->
        <div class="modal-overlay hidden" id="resultModal">
            <div class="modal">
                <h2 class="modal-title">Organization Complete</h2>

                <div class="modal-content">
                    <p>
                        <strong>Files found:</strong> <span id="m-files"></span>
                    </p>
                    <p>
                        <strong>Folders found:</strong>
                        <span id="m-folders"></span>
                    </p>
                    <p class="success">
                        <strong>Organized:</strong>
                        <span id="m-organized"></span>
                    </p>
                    <p class="warning">
                        <strong>Skipped:</strong> <span id="m-skipped"></span>
                    </p>
                    <p class="error">
                        <strong>Errors:</strong> <span id="m-errors"></span>
                    </p>
                    <p class="warning">
                        <strong>Conflicts:</strong>
                        <span id="m-conflicts"></span>
                    </p>
                </div>

                <button class="modal-close">Close</button>
            </div>
        </div>
    </body>
    <script>
        const selectedFolderTag = document.querySelector(".folder-selected");
        const chooseBtn = document.querySelector(".choose-btn");
        const organizeBtn = document.querySelector(".organize-btn");
        const statusTag = document.querySelector(".status");

        let selectedFolderPath = null;
        organizeBtn.disabled = true;

        chooseBtn.addEventListener("click", async () => {
            const folderPath = await window.api.selectDirectory();
            if (folderPath) {
                selectedFolderPath = folderPath;
                selectedFolderTag.innerText = folderPath;
                organizeBtn.disabled = false;
            }
        });

        organizeBtn.addEventListener("click", async () => {
            if (!selectedFolderPath) {
                statusTag.innerText = "Please select a folder first";
                return;
            }

            const result = await window.api.organizeDirectory(
                selectedFolderPath
            );

            const modal = document.getElementById("resultModal");

            document.getElementById("m-files").innerText = result.totalFiles;
            document.getElementById("m-folders").innerText =
                result.foldersFound;
            document.getElementById("m-organized").innerText = result.organized;
            document.getElementById("m-skipped").innerText =
                result.skippedFiles;
            document.getElementById("m-errors").innerText = result.errors;
            document.getElementById("m-conflicts").innerText = result.conflicts;

            modal.classList.remove("hidden");
        });

        document.querySelector(".modal-close").addEventListener("click", () => {
            document.getElementById("resultModal").classList.add("hidden");
        });
    </script>
</html>
